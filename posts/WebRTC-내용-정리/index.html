<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.3.1" /><meta property="og:title" content="WebRTC 내용 정리" /><meta property="og:locale" content="en" /><meta name="description" content="방학동안 WebRTC를 사용해서 프로젝트를 진행했는데, 그때 공부한 WebRTC 관련 내용을 정리해보려고 한다. 사실 처음에는 그냥 실시간 통신을 위해서 많이 사용하는 기술이라서 무지성으로 적용을 했다. 개념만 간단히 이해하고 코드를 작성하는데, 이게 뭔가 작동하기는 하는데 이게 맞는지 의문점이 많이 들어서 공부를 깊게 해보았다. 공부하면 할수록 꽤 깊게 파보면 좋은 내용들이 있어서 정리해보려고 한다. 참고 자료" /><meta property="og:description" content="방학동안 WebRTC를 사용해서 프로젝트를 진행했는데, 그때 공부한 WebRTC 관련 내용을 정리해보려고 한다. 사실 처음에는 그냥 실시간 통신을 위해서 많이 사용하는 기술이라서 무지성으로 적용을 했다. 개념만 간단히 이해하고 코드를 작성하는데, 이게 뭔가 작동하기는 하는데 이게 맞는지 의문점이 많이 들어서 공부를 깊게 해보았다. 공부하면 할수록 꽤 깊게 파보면 좋은 내용들이 있어서 정리해보려고 한다. 참고 자료" /><link rel="canonical" href="https://dgg1dbg.github.io/posts/WebRTC-%EB%82%B4%EC%9A%A9-%EC%A0%95%EB%A6%AC/" /><meta property="og:url" content="https://dgg1dbg.github.io/posts/WebRTC-%EB%82%B4%EC%9A%A9-%EC%A0%95%EB%A6%AC/" /><meta property="og:site_name" content="Jeong Min’s blog" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2025-01-12T02:00:00+00:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="WebRTC 내용 정리" /><meta name="twitter:site" content="@x" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2025-05-29T12:50:53+00:00","datePublished":"2025-01-12T02:00:00+00:00","description":"방학동안 WebRTC를 사용해서 프로젝트를 진행했는데, 그때 공부한 WebRTC 관련 내용을 정리해보려고 한다. 사실 처음에는 그냥 실시간 통신을 위해서 많이 사용하는 기술이라서 무지성으로 적용을 했다. 개념만 간단히 이해하고 코드를 작성하는데, 이게 뭔가 작동하기는 하는데 이게 맞는지 의문점이 많이 들어서 공부를 깊게 해보았다. 공부하면 할수록 꽤 깊게 파보면 좋은 내용들이 있어서 정리해보려고 한다. 참고 자료","headline":"WebRTC 내용 정리","mainEntityOfPage":{"@type":"WebPage","@id":"https://dgg1dbg.github.io/posts/WebRTC-%EB%82%B4%EC%9A%A9-%EC%A0%95%EB%A6%AC/"},"url":"https://dgg1dbg.github.io/posts/WebRTC-%EB%82%B4%EC%9A%A9-%EC%A0%95%EB%A6%AC/"}</script><title>WebRTC 내용 정리 | Jeong Min's blog</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Jeong Min's blog"><meta name="application-name" content="Jeong Min's blog"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get MODE_ATTR() { return "data-mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener("change", () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } } /* ModeToggle */ const toggle = new ModeToggle(); function flipMode() { if (toggle.hasMode) { if (toggle.isSysDarkPrefer) { if (toggle.isLightMode) { toggle.clearMode(); } else { toggle.setLight(); } } else { if (toggle.isDarkMode) { toggle.clearMode(); } else { toggle.setDark(); } } } else { if (toggle.isSysDarkPrefer) { toggle.setLight(); } else { toggle.setDark(); } } toggle.notify(); } /* flipMode() */ </script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> <img src="/assets/img/favicons/android-chrome-512x512.png" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title"> <a href="/">Jeong Min's blog</a></div><div class="site-subtitle font-italic">Coding, Math, Security</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/dgg1dbg" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://twitter.com/x" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['jeongmin.lihi','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper"><div id="topbar" class="container d-flex align-items-center justify-content-between h-100 pl-3 pr-3 pl-md-4 pr-md-4"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>WebRTC 내용 정리</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper" class="d-flex justify-content-center"><div id="main" class="container pl-xl-4 pr-xl-4"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-9 pr-xl-4"><div class="post pl-1 pr-1 pl-md-2 pr-md-2"><h1 data-toc-skip>WebRTC 내용 정리</h1><div class="post-meta text-muted"> <span> Posted <em class="" data-ts="1736647200" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Jan 12, 2025 </em> </span> <span> Updated <em class="" data-ts="1748523053" data-df="ll" data-toggle="tooltip" data-placement="bottom"> May 29, 2025 </em> </span><div class="d-flex justify-content-between"> <span> By <em> <a href="https://twitter.com/username">Jeong Min Lee</a> </em> </span><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="3636 words"> <em>20 min</em> read</span></div></div></div><div class="post-content"><p>방학동안 WebRTC를 사용해서 프로젝트를 진행했는데, 그때 공부한 WebRTC 관련 내용을 정리해보려고 한다.<br /> 사실 처음에는 그냥 실시간 통신을 위해서 많이 사용하는 기술이라서 무지성으로 적용을 했다. 개념만 간단히 이해하고 코드를 작성하는데, 이게 뭔가 작동하기는 하는데 이게 맞는지 의문점이 많이 들어서 공부를 깊게 해보았다. 공부하면 할수록 꽤 깊게 파보면 좋은 내용들이 있어서 정리해보려고 한다.</p><ul><li><a href="https://wormwlrm.github.io/2021/01/24/Introducing-WebRTC.html">참고 자료</a></ul><h2 id="1-webrtc란"><span class="mr-2">1. WebRTC란?</span><a href="#1-webrtc란" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><h3 id="1-1-기본-개념"><span class="mr-2">1-1. 기본 개념</span><a href="#1-1-기본-개념" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p><a href="../../assets/img/WebRTC/Pasted image 20250111151016.png" class="popup img-link "><img data-src="../../assets/img/WebRTC/Pasted image 20250111151016.png" alt="WebTRC" class="lazyload" data-proofer-ignore></a> “웹 어플리케이션, 사이트 등이 <strong>중간자 없이</strong> 서로 영상, 오디오 등의 미디어와 데이터를 교환할 수 있도록 하는 기술”</p><p>여기서 가장 중요한 것은, <strong>중간자 없이</strong> 라는 것이다. 기존의 인터넷 통신은 대부분 사용자 사이에 서버를 두고, 이 서버가 데이터를 중개하는 역할을 한다. 이는 기존의 웹 통신 구조 상 가장 기본적이고 편리한 방법이지만, 실시간으로 빠르게 통신해야하는 상황에서, 이 서버를 거치는것은 불필요한 오버헤드가 된다.</p><p>물론 기존의 웹 통신 구조에서, 이와같은 P2P 채널을 여는것은 그리 간단하지만은 않다. 아래에서 살펴보겠지만, P2P 채널 셋업을 위해 NAT Traversal을 위한 별도의 서버(STUN or TURN)이 있어야하고, Signaling을 위한 서버(Signal Server)가 있어야한다. 아무튼 이러한 P2P 통신을 위한 준비 절차와 통신 규약을 규정한 것이 WebRTC라는 기술이고, 결국 <strong>중간자를 없애기 위해, Connection Setup과정에서 약간의 Overhead를 감수하는</strong> 그런 기술이 된다.</p><p>따라서 주로 WebRTC는 한번 연결하면 비교적 오랜 기간 동안 계속 연결을 유지하는, 그런 application에서 적합하다.</p><h3 id="1-2-webrtc-통신-flow"><span class="mr-2">1-2. WebRTC 통신 Flow</span><a href="#1-2-webrtc-통신-flow" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p><a href="../../assets/img/WebRTC/Pasted image 20250111145723.png" class="popup img-link "><img data-src="../../assets/img/WebRTC/Pasted image 20250111145723.png" alt="WebRTC" class="lazyload" data-proofer-ignore></a></p><p>Web RTC 통신을 위해 필요한 절차들이다. 위에서 말했듯, 여러개의 서버가 필요하며 약간 복잡하다. 그렇지만, 이 준비과정만 끝나면, Peer간의 데이터 전송 방법은 아주 간단하다.</p><p>위의 과정은, 설정과 환경에 따라 약간의 차이는 있지만, 아주 기본적인 순서는 아래와 같다.</p><ol><li><strong>A</strong>와 <strong>B</strong>는 STUN Server, 또는 TURN Server를 사용하여, 자신의 ICE Candidate를 수집<li><strong>A</strong>가 <strong>B</strong>에게 Offer(SDP)를 전송<li><strong>B</strong>가 <strong>A</strong>에게 Answer(SDP)를 전송<li>ICE Candidate를 교환<li>ICE Connectivity Check, Establish<li>WebRTC 통신 시작</ol><p><strong>(2→3, 그리고 4→5만 서로 순서가 상관이 있고, 나머지는 서로간에 순서가 바뀌거나 병렬적으로 수행될 수 있다.)</strong></p><h3 id="1-3-nat-traversal"><span class="mr-2">1-3. NAT Traversal</span><a href="#1-3-nat-traversal" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>WebRTC에서 P2P 통신을 준비하는 과정에서, 가장 처음 부딪히는 문제는, 각 Peer가 자신의 IP 주소(공인 IP)를 모른다는 점이다.<br /> 일반적인 환경에서, 인터넷에 접속할때 NAT를 통해 공인 IP를 획득하고, 서버는 이 공인 IP로 답장을 보낸다. NAT는 호스트 외부의 라우터에서 일어나는 일임으로, 호스트가 관여할 수 없고 일반적인 방법으로 자신의 공인 IP를 알기는 어렵다. 문제는 P2P를 위해서는 상대가 나의 공인 IP를 알아야한다는 것인데, 나도 모른다는것이다…</p><p><a href="https://www.google.com/search?q=what%27s+my+ip&amp;rlz=1C5CHFA_enKR1070KR1070&amp;oq=what%27s+my+ip&amp;gs_lcrp=EgZjaHJvbWUyBggAEEUYOdIBCDI4MDRqMGo0qAIAsAIB&amp;sourceid=chrome&amp;ie=UTF-8">google의 What’s my ip</a></p><p>그래서 이렇게 외부 서버를 사용해서, 자신이 어떤 공인 IP를 할당받았는지 확인하는 과정이 필요해진다. 이렇게 외부에 서버를 두고, 요청을 날려서 IP를 물어보면 될것 같은 간단한 문제처럼 보이지만, 이것은 NAT 설정과 방화벽 등에 의해서 꽤 어려운 문제가 된다.</p><p>이 부분에 제대로 된 설명은 <a href="https://feone97.issacmall.com/?c=webrtc&amp;uid=94">NAT</a></p><p>아무튼 외부 서버를 사용하여 자신의 공인 IP를 획득하는 것을 <strong>NAT Traversal</strong>이라고 하고, 이를 위해 사용되는 서버가 STUN 또는 TURN이다. STUN은 아주 기본적으로 구글의 what’s my ip처럼 자신의 공인 IP를 알려주는 역할을 하고, TURN은 Symmetric NAT등으로 P2P 통신 자체가 불가능한 상황에서, 데이터를 중개하는 서버 역할을 한다. 따라서 TURN을 사용하면 WebRTC이지만, 결과적으로는 P2P 통신이 아니게 된다.</p><p>이런 과정을 통해, 각 peer는 <strong>ICE(Interactive Connectivity Establishment)</strong> Candidate라는 것을 얻게 된다. 이는</p><ul><li>Local Address : 클라이언트의 사설 주소(Host Candidate), 랜과 무선랜 등 다수 인터페이스가 있으면 모든 주소가 후보가 됨<li>Server Reflexive Address : NAT 장비가 매핑한 클라이언트의 공인망 주소로 STUN에 의해 판단한다.(Server Reflexive Candidate)<li>Relayed Address : TURN서버가 패킷 릴레이를 위해 할당하는 주소(Relayed Candidate)  <a href="../../assets/img/WebRTC/Pasted image 20250112004311.png" class="popup img-link "><img data-src="../../assets/img/WebRTC/Pasted image 20250112004311.png" alt="" class="lazyload" data-proofer-ignore></a></ul><p> 이 세가지 종류로 구성된다.<br />  그리고 이렇게 자신의 ICE Candidate 얻은 후, 자신의 정보를 상대방에게 전송해야하는데, 문제는 여전히 상대방의 IP는 모른다는 문제가 있다…<br /> 이를 위해서 Signal Server라는 중간 서버(서로 기존에 협의된)를 사용하여 ICE Candidate를 교환하게 된다. 그리고 상대방의 ICE Candidate로, 최적의 통신 설정을 결정해서 ICE Candidate pair를 결정한다.</p><h3 id="1-3-sdp"><span class="mr-2">1-3. SDP</span><a href="#1-3-sdp" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>각 peer가 셋업 과정에서 공유하는 정보는 ICE Candidate 뿐만이 아니다. 결국 최종적인 목표는 실시간으로 원하는 데이터를 주고받는 것인데, 이를 위해서는 사전에 어떤 형식의 데이터를 주고받을 것인지, 그리고 데이터 통신 채널을 몇개 만들 것인지, 등등의 협의가 필요하다.<br /> 이를 위해서, <strong>SDP(Session Description Protocol)</strong> 라는 패킷을 서로 교환하는 과정을 거친다. <a href="https://cryingnavi.github.io/webrtc/2016/12/30/WebRTC-SDP.html">SDP란?</a><br /> 그리고 SDP는 서로에게 한번씩 보내는데, 보내는 순서는 사전에 협의가 되어있어야 한다. 위의 도식에서, A가 Offer SDP를 보내면, 이를 B가 확인하고 Answer SDP를 보낸다.</p><p>그리고 여기서 약간 헷갈릴 수 있는데, SDP에는 데이터 형식과 개수 뿐만 아니라, 위의 NAT Traversal로 얻은 ICE Candidate도 포함될 수 있다.<br /> 가장 기본적인 상황은 ICE Candidate를 전부 수집한 후, 자신의 SDP(Candiate를 포함시켜)를 보내는 것이다. 다만 ICE Candidate는 경우에 따라 여러개의 서버를 사용하여 delay가 꽤 생길 수 있으므로, 자신의 SDP를 보내기 전, 또는 후에 ICE Candidate를 SDP와 별개로 주고받을 수도 있다. 이를 <strong>Trickle ICE</strong>라고 한다.</p><p>아무튼, B가 Answer SDP를 보내면, 기본적으로 WebRTC를 위한 셋업은 거의 끝났다고 생각하면 된다.</p><h3 id="1-4-signal-server"><span class="mr-2">1-4. Signal Server</span><a href="#1-4-signal-server" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>위에서 언급했듯이 셋업 과정에서 SDP와 ICE Candidate를 보내기 위해 사전에 협의된 별도의 서버가 있어야한다고 했는데, 이를 Signal Server라고 부른다. 그리고 이렇게 Signal Server를 통해 데이터를 주고받으며 WebRTC 통신 셋업을 하는 과정을 Signaling이라고 한다.</p><p>WebRTC의 다른 부분들과 달리, Signal Server에 대한 명시적인 스펙은 존재하지 않는다.</p><p>그래서 STUN이나 TURN 서버는 구글에서도 제공해주는 것과 달리, Signal Server는 보통 직접 구현하고, 각 peer에서 그 Signal Server의 스펙에 맞게 통신을 하게 된다. 물론 Signal Server를 만드는 것은 그리 어렵지 않고, 그냥 peer와 어떻게 통신할 지 정해만 두고 그 스펙을 구현하기만 되기에 어떻게 구현하는 상관이 없다.</p><p>정말 naive하게는 그냥 http 통신을 하도록 구현해도 되고, mqtt, websocket, 등등 아무거나 편한 프로토콜을 사용하면 된다. 그치만 편의상 websocket을 많이 사용하기는 하는 듯 하다.</p><ol><li>Signal Server에게 A가 Offer를 보내면, Server는 B에게 Offer를 전달한다.<li>Signal Server에게 B가 Answer를 보내면, Server는 A에게 Answer를 전달한다.<li>Trickle ICE를 사용한다면, A와 B의 ICE Candidates 도 전달</ol><p>이렇게가 전부이고, 각 peer가 필요한 메시지를 전부 전송/수신 했다고 판단하면, Signal Server로 부터 연결을 해제하면 된다.</p><h2 id="2-webrtc-구현"><span class="mr-2">2. WebRTC 구현</span><a href="#2-webrtc-구현" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>프로젝트 내에서 WebRTC를 어떻게 구현했는지, 간략하게 적어보겠다.</p><h3 id="2-1-signal-server"><span class="mr-2">2-1. Signal Server</span><a href="#2-1-signal-server" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p><a href="https://github.com/aljanabim/simple_webrtc_signaling_server">Signal Server Github</a> 이 레포를 참고하여, socket io 기반으로 Signal Server를 만들었다. socket io가 처음이라면 <a href="https://socket.io/docs/v4/">Socket io Doc</a>을 읽어보자.</p><div class="language-js highlighter-rouge"><div class="code-header"> <span data-label-text="JavaScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
</pre><td class="rouge-code"><pre><span class="c1">// MESSAGING LOGIC</span>
<span class="nx">io</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">"</span><span class="s2">connection</span><span class="dl">"</span><span class="p">,</span> <span class="p">(</span><span class="nx">socket</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">User connected with id</span><span class="dl">"</span><span class="p">,</span> <span class="nx">socket</span><span class="p">.</span><span class="nx">id</span><span class="p">);</span>
	<span class="p">...</span>
    <span class="nx">socket</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">"</span><span class="s2">message</span><span class="dl">"</span><span class="p">,</span> <span class="p">(</span><span class="nx">message</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="c1">// Send message to all peers expect the sender</span>
        <span class="nx">socket</span><span class="p">.</span><span class="nx">broadcast</span><span class="p">.</span><span class="nx">emit</span><span class="p">(</span><span class="dl">"</span><span class="s2">message</span><span class="dl">"</span><span class="p">,</span> <span class="nx">message</span><span class="p">);</span>
    <span class="p">});</span>
    <span class="nx">socket</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">"</span><span class="s2">messageOne</span><span class="dl">"</span><span class="p">,</span> <span class="p">(</span><span class="nx">message</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="c1">// Send message to a specific targeted peer</span>
        <span class="kd">const</span> <span class="p">{</span> <span class="nx">target</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">message</span><span class="p">;</span>
        <span class="kd">const</span> <span class="nx">targetPeer</span> <span class="o">=</span> <span class="nx">connections</span><span class="p">[</span><span class="nx">target</span><span class="p">];</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">targetPeer</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">io</span><span class="p">.</span><span class="nx">to</span><span class="p">(</span><span class="nx">targetPeer</span><span class="p">.</span><span class="nx">socketId</span><span class="p">).</span><span class="nx">emit</span><span class="p">(</span><span class="dl">"</span><span class="s2">message</span><span class="dl">"</span><span class="p">,</span> <span class="p">{</span> <span class="p">...</span><span class="nx">message</span> <span class="p">});</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">`Target </span><span class="p">${</span><span class="nx">target</span><span class="p">}</span><span class="s2"> not found`</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">});</span>
	<span class="p">...</span>
</pre></table></code></div></div><p>서버 코드는 아주 단순하다. 이렇게 message 이벤트가 발생하면, target Peer를 찾아서 그 peer에게 message를 전달하는 역할만 하면 된다.</p><div class="language-js highlighter-rouge"><div class="code-header"> <span data-label-text="JavaScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
</pre><td class="rouge-code"><pre><span class="kd">const</span> <span class="nx">io</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">socket.io-client</span><span class="dl">"</span><span class="p">);</span>
<span class="c1">// This is a bare minimum example of how one might setup a signaling channel as a class</span>
<span class="kd">class</span> <span class="nx">SignalingChannel</span> <span class="p">{</span>
    <span class="kd">constructor</span><span class="p">(</span><span class="nx">peerId</span><span class="p">,</span> <span class="nx">signalingServerUrl</span><span class="p">,</span> <span class="nx">token</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">peerId</span> <span class="o">=</span> <span class="nx">peerId</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">socket</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">io</span><span class="p">(</span><span class="nx">signalingServerUrl</span><span class="p">,</span> <span class="p">{</span>
            <span class="na">auth</span><span class="p">:</span> <span class="p">{</span> <span class="nx">token</span> <span class="p">},</span>
            <span class="na">autoConnect</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
            <span class="na">reconnection</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>  
        <span class="p">});</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">onMessage</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{};</span>
    <span class="p">}</span>
    <span class="nx">connect</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">socket</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">"</span><span class="s2">connect</span><span class="dl">"</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Connected with id</span><span class="dl">"</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">socket</span><span class="p">.</span><span class="nx">id</span><span class="p">);</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">socket</span><span class="p">.</span><span class="nx">emit</span><span class="p">(</span><span class="dl">"</span><span class="s2">ready</span><span class="dl">"</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">peerId</span><span class="p">);</span>
        <span class="p">});</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">socket</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">"</span><span class="s2">disconnect</span><span class="dl">"</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Disconnected</span><span class="dl">"</span><span class="p">);</span>
        <span class="p">});</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">socket</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">"</span><span class="s2">connect_error</span><span class="dl">"</span><span class="p">,</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Connection error</span><span class="dl">"</span><span class="p">,</span> <span class="nx">error</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
        <span class="p">});</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">socket</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">"</span><span class="s2">message</span><span class="dl">"</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">onMessage</span><span class="p">);</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">socket</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">"</span><span class="s2">uniquenessError</span><span class="dl">"</span><span class="p">,</span> <span class="p">(</span><span class="nx">message</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s2">`Error: </span><span class="p">${</span><span class="nx">message</span><span class="p">.</span><span class="nx">error</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>
            <span class="c1">// process.exit(1);</span>
        <span class="p">});</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">socket</span><span class="p">.</span><span class="nx">connect</span><span class="p">();</span>
    <span class="p">}</span>
    <span class="nx">send</span><span class="p">(</span><span class="nx">message</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">socket</span><span class="p">.</span><span class="nx">emit</span><span class="p">(</span><span class="dl">"</span><span class="s2">message</span><span class="dl">"</span><span class="p">,</span> <span class="p">{</span> <span class="na">from</span><span class="p">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">peerId</span><span class="p">,</span> <span class="na">target</span><span class="p">:</span> <span class="dl">"</span><span class="s2">all</span><span class="dl">"</span><span class="p">,</span> <span class="nx">message</span> <span class="p">});</span>
    <span class="p">}</span>
    <span class="nx">sendTo</span><span class="p">(</span><span class="nx">targetPeerId</span><span class="p">,</span> <span class="nx">message</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">socket</span><span class="p">.</span><span class="nx">emit</span><span class="p">(</span><span class="dl">"</span><span class="s2">messageOne</span><span class="dl">"</span><span class="p">,</span> <span class="p">{</span> <span class="na">from</span><span class="p">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">peerId</span><span class="p">,</span> <span class="na">target</span><span class="p">:</span> <span class="nx">targetPeerId</span><span class="p">,</span> <span class="nx">message</span> <span class="p">});</span>
    <span class="p">}</span>
    <span class="nx">disconnect</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">socket</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">socket</span><span class="p">.</span><span class="nx">disconnect</span><span class="p">();</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">SignalingChannel</span><span class="p">;</span>

</pre></table></code></div></div><p>그리고 각 peer는 이 Signaling Channel 클래스를 사용하여,</p><p>connect → sendTo → .on(“message”) → disconnect</p><p>등의 흐름을 거쳐 Signaling을 끝내게 된다.<br /> 실제 프로젝트에서는 Server 코드와 Signaling Channel 코드를 수정해서 사용하였다. 이 코드만 잘 이해해도 Signal Server 만드는 것은 문제가 없을 것이다.</p><h3 id="2-2-signaling"><span class="mr-2">2-2. Signaling</span><a href="#2-2-signaling" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Signaling을 하기 위해서는, 우선 먼저 위에서 만든 Signaling Channel을 만들고, Signal Server에게 connect 이벤트를 보내야 한다. 그리고 webRTC 연결을 관리하는 클래스를 만들어야하는데, 이는 RTCPeerConnection 이란 js에 들어있는 클래스를 사용하면 된다. 정확한 스펙은 <a href="https://w3c.github.io/webrtc-pc/#interface-definition">PeerConnection Doc</a> WebRTC를 사용하고자 한다면, 꼭 읽어보자…</p><div class="language-js highlighter-rouge"><div class="code-header"> <span data-label-text="JavaScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
</pre><td class="rouge-code"><pre><span class="kd">const</span> <span class="nx">signal</span> <span class="o">=</span> <span class="nx">SignalingChannel</span><span class="p">(</span><span class="nx">SIGNAL_SERVER_URL</span><span class="p">,...);</span>
<span class="nx">signal</span><span class="p">.</span><span class="nx">connect</span><span class="p">();</span>
<span class="kd">const</span> <span class="nx">config</span> <span class="o">=</span> <span class="p">{</span>
	<span class="na">iceServers</span> <span class="p">:</span> <span class="p">{</span>
		<span class="p">[{</span>
			<span class="na">urls</span><span class="p">:</span> <span class="nx">STUN_SERVER_URL</span><span class="p">,</span>
			<span class="na">username</span><span class="p">:</span> <span class="nx">STUN_SERVER_USER</span><span class="p">,</span>
			<span class="na">credential</span><span class="p">:</span> <span class="nx">STUN_SERVER_PASSWORD</span><span class="p">,</span>
		<span class="p">},]</span>
	<span class="p">}</span>
<span class="p">}</span>
<span class="kd">const</span> <span class="nx">pc</span> <span class="o">=</span> <span class="nx">RTCPeerConnection</span><span class="p">(</span><span class="nx">config</span><span class="p">);</span>

<span class="nx">pc</span><span class="p">.</span><span class="nx">addTrack</span><span class="p">(...);</span> <span class="c1">//Media Channel</span>
<span class="nx">pc</span><span class="p">.</span><span class="nx">createDataChannel</span><span class="p">(...);</span> <span class="c1">//Data Channel</span>

<span class="kd">const</span> <span class="nx">offer</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">pc</span><span class="p">.</span><span class="nx">createOffer</span><span class="p">();</span>
<span class="kd">const</span> <span class="nx">localDescription</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">pc</span><span class="p">.</span><span class="nx">setLocalDescription</span><span class="p">(</span><span class="nx">offer</span><span class="p">);</span>
<span class="nx">signal</span><span class="p">.</span><span class="nx">sendTo</span><span class="p">(</span><span class="dl">"</span><span class="s2">B</span><span class="dl">"</span><span class="p">,</span> <span class="nx">localDescription</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">answerHandler</span> <span class="o">=</span> <span class="p">(</span><span class="nx">message</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
	<span class="kd">const</span> <span class="nx">remoteDesctiption</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">pc</span><span class="p">.</span><span class="nx">setRemoteDescription</span><span class="p">(</span><span class="nx">message</span><span class="p">);</span>
<span class="p">}</span>

</pre></table></code></div></div><p>Offer 쪽에서 정말 필요한 부분만 추출한 코드이다. 아무튼 대략적인 순서는,</p><ol><li>Signal Server 연결<li>RTCPeerConnection 생성<li>Media Channel, Data Channel 생성<li>Offer 생성, 전송<li>Answer 수신<li>WebRTC 통신 시작</ol><p>그리고 프로젝트에서 한쪽은 js, 다른쪽은 python으로 작성했는데, python에서 RTCPeerConnection같은 모듈은, <a href="https://github.com/aiortc/aiortc">aiortc</a>를 사용하면 된다.</p><h3 id="2-3-media-channel과-data-channel"><span class="mr-2">2-3. Media Channel과 Data Channel</span><a href="#2-3-media-channel과-data-channel" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>이 채널들을 생성하는 것이 WebRTC의 최종적인 목표이다.<br /> 위의 코드에서 처럼,</p><div class="language-js highlighter-rouge"><div class="code-header"> <span data-label-text="JavaScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="nx">pc</span><span class="p">.</span><span class="nx">addTrack</span><span class="p">(...);</span> <span class="c1">//Media Channel</span>
<span class="kd">const</span> <span class="nx">dataChannel</span> <span class="o">=</span> <span class="nx">pc</span><span class="p">.</span><span class="nx">createDataChannel</span><span class="p">(...);</span> <span class="c1">//Data Channel</span>
</pre></table></code></div></div><p>이렇게 해주면 생성이 되고,</p><div class="language-js highlighter-rouge"><div class="code-header"> <span data-label-text="JavaScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nx">dataChannel</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
</pre></table></code></div></div><p>이런식으로 데이터를 보낼 수 있다.<br /> 그리고 채널을 생성할 때, 괸련된 이벤트 핸들러를 만들 수 있다(만들어야 한다).</p><div class="language-js highlighter-rouge"><div class="code-header"> <span data-label-text="JavaScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
</pre><td class="rouge-code"><pre><span class="nx">dataChannel</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Data channel is open</span><span class="dl">'</span><span class="p">);</span>
  <span class="c1">// 연결이 열리면 메시지를 보낼 수 있습니다.</span>
  <span class="nx">dataChannel</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="dl">'</span><span class="s1">Hello from client!</span><span class="dl">'</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">dataChannel</span><span class="p">.</span><span class="nx">onclose</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Data channel is closed</span><span class="dl">'</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">dataChannel</span><span class="p">.</span><span class="nx">onerror</span> <span class="o">=</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Data channel error:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">error</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">dataChannel</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Received message:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">event</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
  <span class="c1">// 데이터 수신 처리</span>
<span class="p">};</span>
</pre></table></code></div></div><p>이런 식으로, 핸들러를 만들어서 채널이 열리고, 닫히고, 메시지가 오는 등의 이벤트에 대해서 처리를 해줄 수 있다.<br /> 사실 WebRTC의 목표상 가장 중요한 코드이고, 비즈니스 로직은 이 핸들러에 연계되어 나타날 것이다.</p><h2 id="3-기타-사항"><span class="mr-2">3. 기타 사항</span><a href="#3-기타-사항" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>WebRTC 셋업과정에서 에러가 발생할 수 있는데, 디버깅하는 방법은 크게 두 가지가 있다.</p><ol><li>RTCPeerConnection의 이벤트 핸들러 사용<li>Chrome의 WebRTC Internal 사용</ol><div class="language-js highlighter-rouge"><div class="code-header"> <span data-label-text="JavaScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre>  <span class="nx">attribute</span> <span class="nx">EventHandler</span> <span class="nx">onnegotiationneeded</span><span class="p">;</span>
  <span class="nx">attribute</span> <span class="nx">EventHandler</span> <span class="nx">onicecandidate</span><span class="p">;</span>
  <span class="nx">attribute</span> <span class="nx">EventHandler</span> <span class="nx">onicecandidateerror</span><span class="p">;</span>
  <span class="nx">attribute</span> <span class="nx">EventHandler</span> <span class="nx">onsignalingstatechange</span><span class="p">;</span>
  <span class="nx">attribute</span> <span class="nx">EventHandler</span> <span class="nx">oniceconnectionstatechange</span><span class="p">;</span>
  <span class="nx">attribute</span> <span class="nx">EventHandler</span> <span class="nx">onicegatheringstatechange</span><span class="p">;</span>
  <span class="nx">attribute</span> <span class="nx">EventHandler</span> <span class="nx">onconnectionstatechange</span><span class="p">;</span>
</pre></table></code></div></div><p>RTCPeerConnction에서는 위와 같은 이벤트 핸들러들을 제공해주는데, 핸들러를 설치해서 상태 변화를 실시간으로 확인할 수 있다.</p><p><a href="chrome://webrtc-internals/">Chrome Web Internals</a> <a href="../../assets/img/WebRTC/Pasted image 20250112112307.png" class="popup img-link "><img data-src="../../assets/img/WebRTC/Pasted image 20250112112307.png" alt="WebRTC" class="lazyload" data-proofer-ignore></a> <a href="https://cyara.com/blog/webrtc-internals-documentation/">Web Internals 설명서</a> 이게 사실 핸들러 설치하는 것보다 직관적이면서 쉽긴하지만, application이 크롬을 사용하지 않는 경우는 사용할 수가 없고, 이벤트 핸들러의 결과랑 약간 다른 부분들이 있어서 문제가 생겼을 경우 둘 다 사용하는 것을 추천한다.</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/network/'>Network</a>, <a href='/categories/webrtc/'>WebRTC</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=WebRTC 내용 정리 - Jeong Min's blog&url=https%3A%2F%2Fdgg1dbg.github.io%2Fposts%2FWebRTC-%25EB%2582%25B4%25EC%259A%25A9-%25EC%25A0%2595%25EB%25A6%25AC%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=WebRTC 내용 정리 - Jeong Min's blog&u=https%3A%2F%2Fdgg1dbg.github.io%2Fposts%2FWebRTC-%25EB%2582%25B4%25EC%259A%25A9-%25EC%25A0%2595%25EB%25A6%25AC%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Fdgg1dbg.github.io%2Fposts%2FWebRTC-%25EB%2582%25B4%25EC%259A%25A9-%25EC%25A0%2595%25EB%25A6%25AC%2F&text=WebRTC 내용 정리 - Jeong Min's blog" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/WebRTC-%EB%82%B4%EC%9A%A9-%EC%A0%95%EB%A6%AC/">WebRTC 내용 정리</a><li><a href="/posts/Syncthing-Server/">라즈베리 파이로 Syncthing 서버 만들기</a><li><a href="/posts/%EB%8F%84%EB%8D%95%EC%9D%98-%EA%B3%84%EB%B3%B4-%EC%9A%94%EC%95%BD%EA%B3%BC-%ED%95%B4%EC%84%9D/">도덕의 계보 요약과 해석</a><li><a href="/posts/DPDK-%EC%82%AC%EC%9A%A9%EA%B8%B0(1)/">DPDK 사용기(1)</a><li><a href="/posts/html-%EA%B3%B5%EB%B6%80-%EC%A0%95%EB%A6%AC/">html 공부 정리</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/book-review/">Book Review</a> <a class="post-tag" href="/tags/python/">Python</a> <a class="post-tag" href="/tags/frontend/">frontend</a> <a class="post-tag" href="/tags/dpdk/">DPDK</a> <a class="post-tag" href="/tags/hft/">HFT</a> <a class="post-tag" href="/tags/math/">Math</a> <a class="post-tag" href="/tags/network/">Network</a> <a class="post-tag" href="/tags/number-theory/">Number Theory</a> <a class="post-tag" href="/tags/ai/">AI</a> <a class="post-tag" href="/tags/css/">css</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 pl-3 pr-3 pr-xl-4 mt-5"><div id="related-posts" class="mb-2 mb-sm-4"><h3 class="pt-2 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/photomap-%EA%B0%9C%EB%B0%9C-%EA%B8%B0%EB%A1%9D/"><div class="card-body"> <em class="small" data-ts="1747106280" data-df="ll" > May 13, 2025 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Photomap 개발 기록</h3><div class="text-muted small"><p> Photomap 개발 기록 작년 여름부터, photomap이라는 웹 플랫폼을 만들고 있다. 쉽게 말하면, 사진가들이 자신들이 찍은 사진을 지도 기반으로 공유할 수 있는 플랫폼이다. 항상 사진을 찍을 때마다 어디로가서 어떤 사진을 찍을 지 고민이 많았는데, 사진가들끼리 지도 기반으로 공유할 수 있는 플랫폼이 있으면 좋겠다는 생각을 해서 개인 프로젝트로...</p></div></div></a></div><div class="card"> <a href="/posts/DPDK-%EC%82%AC%EC%9A%A9%EA%B8%B0(1)/"><div class="card-body"> <em class="small" data-ts="1747106280" data-df="ll" > May 13, 2025 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>DPDK 사용기(1)</h3><div class="text-muted small"><p> 1. 배경 Developing High-Frequency Systems을 우연히 읽다가, HFT 시스템에서 지연을 최소화하기 위해, Kernel bypass와 zero-copy를 사용해야 한다는 것을 알게 되었다. (참고로 저 책은 별로 추천안함) Kernel bypass란 말 그대로 커널을 우회하여 사용자 공간에서 직접 하드웨어에 접근하는 기술이다...</p></div></div></a></div><div class="card"> <a href="/posts/Syncthing-Server/"><div class="card-body"> <em class="small" data-ts="1742178240" data-df="ll" > Mar 17, 2025 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>라즈베리 파이로 Syncthing 서버 만들기</h3><div class="text-muted small"><p> 배경 개발을 여러 환경에서 하다보면, 소스코드 관리가 꽤 골칫거리가 된다. 현재 밖에서는 맥북에어, 집에서는 리눅스 데스크탑으로 개발을 하고 있다. 학교에서 맥북으로 작업하다가, 집에서는 우분투로 해야하니 파일 동기화가 필요해졌다. 이전에도 비슷한 상황들이 있었는데, 그때는 우분투가 아닌 맥-윈도우 간의 동기화만 신경쓰면 됐어서, 그냥 구글 드라이브/...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/%EB%8B%A8%EB%8B%A8%ED%95%9C-%EC%8B%AC%EC%B8%B5-%EA%B0%95%ED%99%94%ED%95%99%EC%8A%B5-%EC%A0%95%EB%A6%AC/" class="btn btn-outline-primary" prompt="Older"><p>단단한 심층 강화학습 정리</p></a> <a href="/posts/Syncthing-Server/" class="btn btn-outline-primary" prompt="Newer"><p>라즈베리 파이로 Syncthing 서버 만들기</p></a></div><script type="text/javascript"> $(function () { const origin = "https://giscus.app"; const iframe = "iframe.giscus-frame"; const lightTheme = "light"; const darkTheme = "dark_dimmed"; let initTheme = lightTheme; if ($("html[data-mode=dark]").length > 0 || ($("html[data-mode]").length == 0 && window.matchMedia("(prefers-color-scheme: dark)").matches)) { initTheme = darkTheme; } let giscusAttributes = { "src": "https://giscus.app/client.js", "data-repo": "dgg1dbg/dgg1dbg.github.io", "data-repo-id": "R_kgDOH8CEaQ", "data-category": "General", "data-category-id": "DIC_kwDOH8CEac4CRO2Z", "data-mapping": "pathname", "data-reactions-enabled": "1", "data-emit-metadata": "0", "data-theme": initTheme, "data-input-position": "bottom", "data-lang": "", "crossorigin": "anonymous", "async": "" }; let giscusScript = document.createElement("script"); Object.entries(giscusAttributes).forEach(([key, value]) => giscusScript.setAttribute(key, value)); document.getElementById("tail-wrapper").appendChild(giscusScript); addEventListener("message", (event) => { if (event.source === window && event.data && event.data.direction === ModeToggle.ID) { /* global theme mode changed */ const mode = event.data.message; const theme = (mode === ModeToggle.DARK_MODE ? darkTheme : lightTheme); const message = { setConfig: { theme: theme } }; const giscus = document.querySelector(iframe).contentWindow; giscus.postMessage({ giscus: message }, origin); } }); }); </script></div></div></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/book-review/">Book Review</a> <a class="post-tag" href="/tags/python/">Python</a> <a class="post-tag" href="/tags/frontend/">frontend</a> <a class="post-tag" href="/tags/dpdk/">DPDK</a> <a class="post-tag" href="/tags/hft/">HFT</a> <a class="post-tag" href="/tags/math/">Math</a> <a class="post-tag" href="/tags/network/">Network</a> <a class="post-tag" href="/tags/number-theory/">Number Theory</a> <a class="post-tag" href="/tags/ai/">AI</a> <a class="post-tag" href="/tags/css/">css</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><footer><div class="container pl-lg-4 pr-lg-4"><div class="d-flex justify-content-between align-items-center text-muted ml-md-3 mr-md-3"><div class="footer-left"><p class="mb-0"> © 2025 <a href="https://twitter.com/username">Jeong Min Lee</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0">Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></div></footer><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a><div id="notification" class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-animation="true" data-autohide="false"><div class="toast-header"> <button type="button" class="ml-2 ml-auto close" data-dismiss="toast" aria-label="Close"> <span aria-hidden="true">&times;</span> </button></div><div class="toast-body text-center pt-0"><p class="pl-2 pr-2 mb-3">A new version of content is available.</p><button type="button" class="btn btn-primary" aria-label="Update"> Update </button></div></div><script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No results found.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lazysizes@5.3.2/lazysizes.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/en.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-MT5785FP0G"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-MT5785FP0G'); }); </script>
